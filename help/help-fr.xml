<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" "http://docbook.org/xml/4.2/docbookx.dtd">
<article lang="fr">
<title>Manuel de pyMecaVideo</title>
<articleinfo>
<author>
<firstname>Georges</firstname>
<surname>Khaznadar</surname>
<address><email>georgesk@ofset.org</email></address>
</author>
<date>1er janvier 2008</date>
<abstract>
<para>
pyMecaVideo est un logiciel facilitant le repérage de points mobiles dans
une vidéo et d'en exploiter la cinématique pour des usages de mesure physique.
</para>
</abstract>
</articleinfo>
<sect1>
<title>pyMecaVideo, pourquoi faire&nbsp;?</title>
<mediaobject><imageobject><imagedata fileref="snap1.png" align="left"></imagedata></imageobject></mediaobject>
<para>Il est possible de faire des mesures physiques à l'aide d'images,
dans certaines conditions. <symbol> pyMecaVideo</symbol> facilite
les mesures physiques faites sur des séquences d'images vidéo. Il suffit de
travailler à partir d'un fichier vidéo
de type <computeroutput>AVI</computeroutput>,
encodé à l'aide d'un codec libre<footnote>
<para>Attention, un grand nombre de séquences vidéo sont encodées à l'aide
de logiciels de codage/décodage (codecs) propriétaires, dont les concepteurs
interdisent d'étudier le fonctionnement. <symbol> pyMecaVideo</symbol>
est un logiciel libre, il n'incorpore pas de sous-ensemble opaque,
donc il vous appartient de vérifier la codec utilisé par les séquences vidéo
que vous voulez utiliser.</para>
<para>Attention : le format <computeroutput>.avi</computeroutput> du fichier
est un format conteneur, qui autorise différents codecs. On ne peut donc
pas se baser sur le nom complet du fichier pour deviner le codec de celui-ci.
Pour déterminer le codec d'un fichier vidéo, vous pouvez utiliser la commande
<computeroutput>file</computeroutput>, par exemple&nbsp;:
<programlisting>$ file video/g1.avi
video/g1.avi: RIFF (little-endian) data, AVI, 400 x 300, 25.00 fps, video: DivX 5
</programlisting>
</para>
</footnote>, 
qui comporte au moins une image dont on peut
déterminer l'échelle.
</para>
<para><symbol> pyMecaVideo</symbol> permet d'ouvrir et de décomposer
en images la vidéo, et par des pointages successifs, de suivre le mouvement 
d'un point, et éventuellement le mouvement de l'origine d'un référentiel
mobile dans le cadre des images. Les données pointées sont ensuite exploitables
à l'aide de logiciels d'analyse standard.
</para>
</sect1>
<sect1>
<title>Téléchargement et installation</title>

<para>
<ulink url="http://lucette-serveur.hd.free.fr/trac/pymecavideo">
<medialabel><inlinemediaobject><imageobject> <imagedata fileref="snap2-mini.png" align="left"></imagedata></imageobject></inlinemediaobject></medialabel>
</ulink>  Les sources de <symbol> pyMecaVideo</symbol> sont disponibles sur
<ulink url="http://lucette-serveur.hd.free.fr/trac/pymecavideo">
le site &laquo;&nbsp;trac&nbsp;&raquo;</ulink>. Pour l'installation sous
<productname> Linux</productname>, décomprimer l'archive, entrer dans le
répertoire <computeroutput>pymecavideo/</computeroutput>, et taper la
commande suivante : <computeroutput>python setup.py install</computeroutput>.
Cela met en place les modules nécessaires pour python. 
Activer l'attribut exécutable du fichier 
<computeroutput>pymecavideo</computeroutput>, par exemple en tapant la
commande <computeroutput>chmod +x pymecavideo</computeroutput>, puis copier ce
fichier dans une place où celui-ci sera facile à lancer en tant que commande.
La liste des répertoires accessibles pour lancer une commande peut être
obtenue en tapant <computeroutput>echo $PATH</computeroutput>.
</para>
<para>
Il est possible aussi d'obtenir des fichiers binaires, qui sont pris en charge
par le gestionnaire de paquets de votre distribution préférée. Actuellement
on trouve des paquets RPM et Debian, voir 
<ulink url="http://lucette-serveur.hd.free.fr/trac/pymecavideo">
le site &laquo;&nbsp;trac&nbsp;&raquo;</ulink>.
</para>
</sect1>
<sect1>
  <title>Lancement de pyMecaVideo</title>
<mediaobject><imageobject><imagedata fileref="snap3-mini.png" align="left"></imagedata></imageobject></mediaobject>
  <para>
    Il est possible de lancer <symbol>pyMecaVideo</symbol> de diverses
    façons : en ligne, on peut taper 
    <computeroutput>pymecavideo</computeroutput>
    ou <computeroutput>pymecavideo nom_de_fichier_video.avi</computeroutput>.
    On peut aussi le lancer à partir du menu graphique de votre gestionnaire
    de fenêtre : <symbol>KDE</symbol> et <symbol>Gnome</symbol> intègrent
    l'application dans le menu si vous faites une installation à l'aide d'un
    paquet. 
    <variablelist>
      <varlistentry><term>Dans le cas de KDE,</term>
      <listitem><para>l'application devrait être accessible 
      par les menus 
      Éducatif&nbsp;-&gt;&nbsp;Science&nbsp;-&gt;&nbsp;pyMecaVideo.
    </para>
      </listitem>
      </varlistentry>
      <varlistentry><term>Dans le cas de Gnome,</term>
      <listitem><para>l'application devrait être accessible 
      par les menus 
      Éducation&nbsp;-&gt;&nbsp;pyMecaVideo.
    </para>
      </listitem>
      </varlistentry>
    </variablelist>
  </para>
  <para>
    <ulink url="/usr/share/icons/pymecavideo.svg">
    Voici l'icône de l'application&nbsp;:
    <inlinemediaobject><imageobject><imagedata fileref="/usr/share/icons/pymecavideo.png" valign="middle" width="2em"></imagedata></imageobject></inlinemediaobject>
    </ulink>
  </para>
</sect1>

<sect1><title>Préparer une vidéo pour pouvoir la traiter</title>
<para>
La préparation de la vidéo commence dès la prise de vues. Les points-clés
sont les suivants&nbsp;:
<itemizedlist>
  <listitem><para>
    Choisir un bon éclairage. Les éclairages fluorescents posent parfois
    problème, car leur intensité varie très rapidement, et cela peut donner
    quelquefois naissance à des phénomènes stroboscopiques. D'autre part, pour
    les caméras vidéo disposant de bons automatismes, un éclairage suffisant
    facilite le choix de temps de pose courts, qui sont favorables à
    l'acquisition de données.
  </para></listitem>
  <listitem><para>
    La scène doit posséder un bon contraste. En particulier les points à
    suivre doivent se distinguer aisément par valeur, sinon par la couleur, 
    de leur environnement.
  </para></listitem>
  <listitem><para>
    Il faut penser à laisser un objet de taille connue, dans le même plan
    focal que la scène qui sera filmée. Il est bon de documenter la dimension
    de l'objet-étalon.
  </para></listitem>
  <listitem><para>
    L'axe optique de la caméra doit être perpendiculaire au plan dans lequel
    se déplace l'objet étudié. Il doit pointer environ vers le milieu de
    la trajectoire probable.
  </para></listitem>
  <listitem><para>
    On commence à filmer avant l'évènement, on arrête après l'évènement.
    Il est préférable de fixer le début et la fin de la séquence vidéo
    à l'étape de montage.
  </para></listitem>
  <listitem><para>
    Utiliser un logiciel libre de montage, et couper la séquence pertinente.
    Quelques dizaines d'images au plus suffisent. La choix d'un logiciel
    libre assure que les codecs utilisés ne poseront pas de problème à
    l'avenir. Exemples de logiciels utilisables : 
    <ulink url="http://fr.wikipedia.org/wiki/Kino_(logiciel)">Kino</ulink>, 
    <ulink url="http://fr.wikipedia.org/wiki/Cinelerra">Cinelerra</ulink>.
    La vidéo sera enregistrée dans un conteneur au format 
    <computeroutput>.avi</computeroutput>.
  </para></listitem>
</itemizedlist>
</para>
</sect1>

<sect1><title>Utilisation de pyMecaVideo</title>
<mediaobject><imageobject><imagedata fileref="snap4.png" align="left"></imagedata></imageobject></mediaobject>
<para>
Il faut bien sûr commencer par charger une vidéo avant de pouvoir en faire 
quoi que ce soit. Ça peut se faire au lancement de la commande, en tapant
en ligne de commande&nbsp;:
<computeroutput>pymecavideo nom_de_fichier_video.avi</computeroutput>, ou
en mode graphique quand <symbol>pyMecaVideo</symbol> est lancé, par le
menu Fichier&nbsp;-&gt;&nbsp;Ouvrir une vidéo, ou encore si on veut une
des vidéos d'exemple, par le menu Aide&nbsp;-&gt;&nbsp;Exemples ...
</para>
<sect2><title>Régler l'échelle</title>

<para>Quand on dispose d'un fichier vidéo ouvert, le bouton 
&laquo;&nbsp;Définir l'échelle&nbsp;&raquo; est actif, mais la valeur de 
l'échelle est encore indéfinie. On peut utiliser le curseur ou le champ de
numéro d'image pour faire apparaître une image autre que la première
de la séquence vidéo. Il faut que l'objet étalon soit dans le champ, et il
faut connaître sa longueur en mètre.
</para>
<para>
On clique alors sur ce bouton, on renseigne la longueur de l'objet-étalon
dans le dialogue qui surgit (on utilise la virgule comme séparateur décimal,
par exemple 0,60 m pour signifier 60 cm), on valide, puis lorsque
le curseur de la souris devient une crois de Malte, on réalise un tirer-glisser
d'une extrémité à l'autre de l'objet-étalon. Il est possible de recommencer
l'étalonnage tant qu'on n'appuie pas sur le bouton 
&laquo;&nbsp;GO&nbsp;!&nbsp;&raquo; qui est activé dès la première 
définition de l'échelle.
</para>
</sect2>
<sect2><title>Utiliser éventuellement un autre référentiel</title>
<mediaobject><imageobject><imagedata fileref="snap5.png" align="left"></imagedata></imageobject></mediaobject>
<para> Il est possible de déclarer qu'on pointera les positions d'un référentiel
mobile d'une image à l'autre. Pour cela, passer la valeur de 0 à 1 pour le 
champ des autres référentiels. Ce réglage ne peut pas être retouché après qu'on
ait commencé les pointages par appui sur le bouton 
&laquo;&nbsp;GO&nbsp;!&nbsp;&raquo;, il faut donc y penser avant.
</para>
</sect2>
<sect2><title>Pointer les positions</title>
<mediaobject><imageobject><imagedata fileref="snap6.png" align="left"></imagedata></imageobject></mediaobject>
<para>
  On peut décider de ne pas commencer le pointage dès la première image. 
  Dans ce cas, il faut choisir manuellement l'image initiale à l'aide du 
  curseur en haut à gauche, ou du champ de sélection de numéro d'image.
  Le pointage commence quand on clique sur le bouton
  &laquo;&nbsp;GO&nbsp;!&nbsp;&raquo;. Deux cas se présentent&nbsp;
  <itemizedlist>
    <listitem><para>
      Il n'y a pas de référentiel supplémentaire. Dans ce cas l'origine du
      référentiel par défaut est en bas à gauche de la série d'images.
      Il suffit alors de cliquer les positions successives du point étudié
      et ses coordonnées en pixel s'inscrivent automatiquement dans le
      tableau à droite de la fenêtre.
    </para></listitem>
    <listitem><para>
      On a déclaré un référentiel supplémentaire. Dans ce cas, on clique
      à chaque image sur deux positions&nbsp;: d'abord sur l'origine du 
      référentiel supplémentaire, ensuite sur le point étudié.
    </para></listitem>
  </itemizedlist>
  Il est possible d'arrêter le pointage à tout moment, éventuellement avant 
  la fin de la séquence vidéo.
</para>
</sect2>
<sect2><title>Enregistrer le travail</title>
<para>
Après que des points aient été repérés, il devient possible d'enregistrer 
le travail grâce au menu Fichier&nbsp;-&gt;&nbsp;Enregistrer les données.
On choisit alors un fichier de type <computeroutput>.csv</computeroutput>,
<computeroutput>.dat</computeroutput>,<computeroutput>.txt</computeroutput>
ou <computeroutput>.asc</computeroutput><footnote><para>
Les types de fichiers <computeroutput>.csv</computeroutput>,
<computeroutput>.dat</computeroutput>,<computeroutput>.txt</computeroutput>
ou <computeroutput>.asc</computeroutput> sont par
convention réservés à des fichiers de données à un format texte pur, c'est
à dire humainement lisible. Essayez d'ouvrir un fichier que vous produirez
ainsi à l'aide d'un éditeur de texte, vous vous rendrez compte de sa 
structure, claire et simple à comprendre.</para></footnote>
</para>
<para><emphasis>NB&nbsp;:</emphasis>en même temps que le fichier que vous 
choisissez est enregistré, un autre le sera automatiquement. Si vous choisissez
par exemple d'enregistrer un fichier de nom 
<computeroutput>data.csv</computeroutput>, un autre fichier de nom
<computeroutput>data.csv.mecavideo</computeroutput> sera enregistré.
Voici les caractéristiques de ces deux fichiers&nbsp;:
<itemizedlist>
<listitem><para>
  Le fichier choisi explicitement (de nom <computeroutput>data.csv</computeroutput>
  par exemple) contient les données en unités seconde pour le temps et mètre
  pour les distances. C'est ce fichier qui est pertinent pour un traitement
  des données physiques à l'aide de logiciels d'analyse.
</para></listitem>
<listitem><para>
  Le fichier créé en plus (de nom <computeroutput>data.csv.mecavideo</computeroutput>
  pour l'exemple) contient des données différentes : ce sont uniquement 
  des nombres entiers pour les positions, c'est à dire qu'on enregistre les
  lieux des pointages en unité pixel. De plus, les données permettant de
  reconstituer l'échelle font partie de ce fichier. Ce dernier fichier est
  plutôt destiné à l'usage interne de l'application.
</para></listitem>
</itemizedlist>
</para>
</sect2>
<sect2><title>Le volet des trajectoires</title>
<para>
</para>
</sect2>
</sect1>

<sect1><title>Les logiciels de traitement des données</title>
<para>
</para>
</sect1>

<sect1><title>Comment contribuer</title>
<para>
</para>
</sect1>

<sect1><title>Auteurs</title>
<para>
</para>
</sect1>
<sect1><title>Licences</title>
<sect2><title>Le programme</title>
<para>
</para>
</sect2>
<sect2><title>Les exemples</title>
<para>
</para>
</sect2>
</sect1>

</article>

